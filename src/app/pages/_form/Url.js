import React from "react";

import { Controller, useWatch } from "react-hook-form";
import slugify from "slugify";

import { TextField } from "@material-ui/core";

import { Card } from "@/components/Card";

export const Url = (props) => {
  const { control, errors, slug = "" } = props;
  const title = useWatch({ control, name: "title", defaultValue: slug });

  return (
    <Card title="URL">
      <Controller
        as={TextField}
        control={control}
        name="slug"
        label="Slug"
        placeholder={slugify(title, { lower: true })}
        fullWidth
        error={!!errors.slug}
        helperText={
          !!errors.slug
            ? errors.slug?.message
            : "If empty, URL will be autogenerated from Page Name"
        }
      />
    </Card>
  );
};
